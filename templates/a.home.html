<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Fountain AI — Home</title>
  <link rel="icon" type="image/png" href="/static/company_logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --bg:#0b1020; --panel:#121832; --text:#e9ecf1; --muted:#aab4cc; --brand:#7cb8ff; --border:rgba(255,255,255,.08) }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial}
    a{color:var(--text);text-decoration:none}
    nav{background:#0b132b;border-bottom:1px solid var(--border)}
    .nav-inner{max-width:1200px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;font-weight:800;letter-spacing:.3px}
    .brand img{height:28px;margin-right:8px}
    .tabs a{opacity:.85;margin-left:18px}
    .tabs a.active{opacity:1;color:var(--brand);font-weight:700}
    .wrap{max-width:1200px;margin:0 auto;padding:24px}
    h1{margin:10px 0 16px}
    .grid{display:grid;grid-template-columns:1fr;gap:18px}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .muted{color:var(--muted)}
    .btn{display:inline-block;background:#1a2250;border:1px solid var(--border);padding:.6rem .9rem;border-radius:10px;margin-right:8px}
    ul.news{ max-height:480px; overflow:auto; margin:0; padding-left:1.1rem }
    ul.news li{ margin:8px 0 }
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <div class="brand">
        <img src="/static/company_logo.png" alt="Fountain AI logo"><span>Fountain AI - Market Intelligence That Matters</span>
      </div>
      <div class="tabs">
        <a href="/" class="active">Home</a>
        <a href="/congress">Congress Trades</a>
        <a href="/portfolio">My Portfolio</a>
      </div>
    </div>
  </nav>

  <div class="wrap">
    <h1>Today</h1>

    <div class="grid">
      <!-- Headlines -->
      <div class="card">
        <h3>Major Headlines</h3>
        <ul class="news" id="news-major"></ul>
        <div class="muted">Source: CNBC</div>
      </div>
    </div>

    <div class="section" style="margin-top:20px">
      <a class="btn" href="/congress">Go to Congress Trades</a>
      <a class="btn" href="/portfolio">Go to Personalized Portfolio</a>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    async function loadMajor() {
      try {
        const res = await fetch('/api/home/major', { cache: 'no-store' });
        const data = await res.json();
        const ul = document.getElementById('news-major');
        ul.innerHTML = '';
        (data.articles || []).slice(0, 12).forEach(a => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="${a.url}" target="_blank" rel="noopener noreferrer">${a.title}</a>
                          <div class="muted">${a.source} • ${new Date(a.published_at || Date.now()).toLocaleString()}</div>`;
          ul.appendChild(li);
        });
        if (!data.articles || !data.articles.length) {
          ul.innerHTML = '<li class="muted">No headlines available.</li>';
        }
      } catch (e) {
        document.getElementById('news-major').innerHTML = '<li class="muted">Failed to load headlines.</li>';
        console.error(e);
      }
    }

    window.addEventListener('DOMContentLoaded', loadMajor);
  </script>
</body>
</html>
