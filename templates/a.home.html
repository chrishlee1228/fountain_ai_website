<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Fountain AI — Home</title>
  <link rel="icon" type="image/png" href="/static/company_logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --bg:#0b1020; --panel:#121832; --text:#e9ecf1; --muted:#aab4cc; --brand:#7cb8ff; --border:rgba(255,255,255,.08) }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial}
    a{color:var(--text);text-decoration:none}
    nav{background:#0b132b;border-bottom:1px solid var(--border)}
    .nav-inner{max-width:1200px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;font-weight:800;letter-spacing:.3px}
    .brand img{height:28px;margin-right:8px}
    .tabs a{opacity:.85;margin-left:18px}
    .tabs a.active{opacity:1;color:var(--brand);font-weight:700}

    .wrap{max-width:1200px;margin:0 auto;padding:24px}
    h1{margin:10px 0 16px}
    .grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px}
    @media (max-width:1100px){ .grid{grid-template-columns:1fr} }
    .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .muted{color:var(--muted)}
    .btn{display:inline-block;background:#1a2250;border:1px solid var(--border);padding:.6rem .9rem;border-radius:10px;margin-right:8px}
    .section{margin-top:20px}
    table{width:100%;border-collapse:collapse}
    th, td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
    th{font-weight:700}
    /* Scrollable headlines list */
    ul.news{
      max-height: 320px;      /* adjust height to taste */
      overflow: auto;
      margin: 0;
      padding-left: 1.1rem;   /* keep bullets aligned */
    }
    ul.news li{
      margin: 8px 0;
    }

    ul.news { max-height: 480px; overflow: auto; margin: 0; padding-left: 1.1rem; }
    ul.news li { margin: 8px 0; }

    /* Add this new rule */
    #sec-recent { max-height: 480px; overflow: auto; }


  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <div class="brand">
        <img src="/static/company_logo.png" alt="Fountain AI logo"><span>Fountain AI - Market Intelligence That Matters</span>
      </div>
      <div class="tabs">
        <a href="/" class="active">Home</a>
        <a href="/congress">Congress Trades</a>
        <a href="/portfolio">Personalized Portfolio</a>
      </div>
    </div>
  </nav>

  <div class="wrap">
    <h1>Today</h1>

    <!-- Cards -->
    <div class="grid">
      <div class="card">
        <h3>Major Headlines</h3>
        <ul class="news" id="news-major"></ul>
        <div class="muted">Source: Reuters</div>
      </div>

    <div class="card">
      <h3>Recent SEC Filings (10-K / 10-Q / 8-K)</h3>
      <ul class="news" id="sec-recent"></ul>
      <div class="muted">Source: SEC EDGAR</div>
    </div>

      <div class="card">
        <h3>Government News</h3>
        <p class="muted">Key policy, regulation, and fiscal updates.</p>
      </div>

      <div class="card">
        <h3>Industry &amp; Markets</h3>
        <p class="muted">Sector moves, earnings, and macro drivers.</p>
      </div>
    </div>

    <!-- Static table shell (no data fetching) -->
    <div class="card section">
      <h3>Sector Snapshot</h3>
      <p class="muted">Overview of sectors. (Data section intentionally blank in this basic version.)</p>
      <div style="overflow:auto">
        <table>
          <thead>
            <tr>
              <th>Industry / Sector</th>
              <th>Market Cap Share</th>
              <th>Weight</th>
              <th>Daily</th>
              <th>MTD</th>
              <th>YTD</th>
              <th>ITD</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="section">
      <a class="btn" href="/congress">Go to Congress Trades</a>
      <a class="btn" href="/portfolio">Go to Personalized Portfolio</a>
    </div>
  </div>

  <!-- Put the script at the bottom so #news-major exists -->
  <script>
    async function loadMajor() {
      try {
        const res = await fetch('/api/home/major', { cache: 'no-store' });
        const data = await res.json();
        const ul = document.getElementById('news-major');
        ul.innerHTML = '';
        (data.articles || []).slice(0, 12).forEach(a => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="${a.url}" target="_blank">${a.title}</a>
                          <div class="muted">${a.source} • ${new Date(a.published_at || Date.now()).toLocaleString()}</div>`;
          ul.appendChild(li);
        });
        if (!data.articles || !data.articles.length) {
          ul.innerHTML = '<li class="muted">No headlines available.</li>';
        }
      } catch (e) {
        const ul = document.getElementById('news-major');
        ul.innerHTML = '<li class="muted">Failed to load headlines.</li>';
        console.error(e);
      }
    }
    // Ensure it runs after the DOM is ready
    window.addEventListener('DOMContentLoaded', loadMajor);
  </script>
</body>

<script>
async function loadSecRecent() {
  try {
    const res = await fetch('/api/home/sec-recent?forms=10-K,10-Q,8-K&count=100', { cache:'no-store' });
    const data = await res.json();
    const ul = document.getElementById('sec-recent');
    ul.innerHTML = '';
    (data.filings || []).forEach(f => {
      const li = document.createElement('li');
      li.innerHTML = `
        <a href="${f.url || '#'}" target="_blank">${f.form} — ${f.company}</a>
        <div class="muted">${f.filed_at ? new Date(f.filed_at).toLocaleString() : ''}</div>
      `;
      ul.appendChild(li);
    });
    if (!data.filings || !data.filings.length) {
      ul.innerHTML = '<li class="muted">No recent SEC filings found.</li>';
    }
  } catch (e) {
    const ul = document.getElementById('sec-recent');
    if (ul) ul.innerHTML = '<li class="muted">Failed to load SEC filings.</li>';
    console.error(e);
  }
}
window.addEventListener('DOMContentLoaded', loadSecRecent);
</script>



</body>
</html>
